<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>girls.js - Funkcje</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/simple.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="icon" href="img/logo.svg">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/custom.css">

    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

    <!-- Printing and PDF exports -->
    <script>
        let link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!-- facebook meta -->
    <meta property="og:description" content="Materiały do kursu girls.js: poznawanie języka JavaScript na przykładzie tworzenia interaktywnej galerii obrazków." />
    <meta property="og:image" content="https://girlsjs.github.io/www/assets/logo.png" />
</head>
<body>
<div class="left-bar">
  <div class="left-bar-photo"></div>
</div>
<div class="help">
  <a href="help.html">?</a>
</div>
<div class="reveal">
    <div class="slides">
        <section>
          <div class="big-logo">
            <img style="height: 400px; border: none; box-shadow: none;" src="img/logo.svg"/>
          </div>
          <h3 class="fragment grow">Cześć!</h3>
          <p>(naciśnij spację, żeby kontynuować)</p>
          <i class="fragment fade-down fa fa-angle-right"></i>
        </section>

        <section>
          <h1 style="font-size: 3rem">Funkcje</h1>
          <figure>
            <img src="img/graph.gif" />
            <figcaption style="font-size: 0.5rem">
              Grafika zapożyczona z serwisu media.quizizz.com
            </figcaption>
          </figure>
        </section>

        <section>
          <h3 style="font-size: 3rem">Funkcje</h3>
          <p>Dziś poznamy lepiej funkcje. Są one bardzo ważną częścią języka JavaScript (i programowania w ogole).</p>
        </section>
        <section>
          <h3 style="font-size: 3rem">Do czego przydają się funkcje?</h3>
          <p>Jeżeli byłyście na warsztacie, pisałyście tam własne funkcje do obsługi przyciskow na stronie.</p>
          <p class="fragment">Funkcje przydają się, gdy chcemy ten sam kawałek kodu wykonać kilka razy.</p>
          <p class="fragment">Można wykonywać go za każdym razem <strong>na innych danych</strong>.</p>
          <p class="fragment">Funkcja może też zwracać wynik swojego działania, na ktorym reszta kodu będzie działać dalej.</p>
        </section>
        <section>
          <h3 style="font-size: 3rem">Więc czym to się właściwie rożni od pętli?</h3>
          <p>Na ostatnich zajęciach używałyśmy przecież pętli, żeby wykonywać ten sam kod kilka razy...</p>
        </section>
        <section>    
          <p>Pętlę wykonujemy kilka razy jedno po drugim, i na tym koniec. Funkcję możemy wywołać w dowolnym momencie, z dowolnego miejsca w kodzie.</p>
          <p class="fragment">Pętla musi mieć z gory przygotowane dane i działa na nich w ściśle  określonej kolejności (0, 1, 2, ...). Funkcja za każdym razem może dostać nowy zestaw danych, niezależny od tego co było wcześniej.</p>
          <p class="fragment">Podział na funkcje sprawia, że kod staje się bardziej przejrzysty, i łatwiej szukać w nim błędow.</p>
        </section>
        <section>
          <h3 style="font-size: 3rem">A w praktyce?</h3>
          <figure>
            <img src="img/postit.jpg" />
            <figcaption style="font-size: 0.5rem">
              Grafika zapożyczona z <a href="https://www.orsgroup.com.au/blog/how-to-stress-down-for-stress-down-day/">orsgroup.com</a>
            </figcaption>
          </figure>
        </section>    
        <section>    
          <h3 style="font-size: 3rem">A w praktyce?</h3> 
          <p>Żeby wypisać karteczki w pętli, musimy z gory pamiętać, co na ktorej będzie, w jakiej idą kolejności, i wypisać je wszystkie jedna po drugiej.</p>
          <p class="fragment">Używając funkcji możemy pojedynczo dodawać nowe karteczki, kiedy tylko nam coś wpadnie do głowy - nawet kiedy zajmujemy się właśnie czymś zupełnie innym.</p>
        </section>  
        <section>    
          <h3 style="font-size: 3rem">Na razie bez komputerow...</h3> 
          <p class="note task fragment fade-left">
            Załozmy, że chcemy dodać nową karteczkę do tablicy z poprzedniego slajdu. Zastanowmy się razem, jakie czynności będziemy musiały wykonać?
          </p>
        </section>             
        <section>
          <h3 style="font-size: 3rem">Dodawanie nowej karteczki - na sucho :-)</h3>
          <pre><code class="hljs javascript">1. Weź samoprzylepną karteczkę.
2. Weź długopis.
3. Napisz na karteczce tekst.
4. Przyklej karteczkę na tablicy.
5. Odłoż długopis (?)</code></pre>
        </section>
         <section>    
          <h3 style="font-size: 3rem">Czegoś tu brakuje?</h3> 
          <p class="note task fragment fade-left">
            Skąd wiemy, jaki tekst napisać na karteczce?
          </p>
        </section> 
        <section>
          <h3 style="font-size: 3rem">Dodawanie nowej karteczki - na sucho :-)</h3>
          <pre><code class="hljs javascript">Funkcja: Dodaj nową karteczkę ( dany_tekst ):
1. Weź samoprzylepną karteczkę.
2. Weź długopis.
3. Napisz na karteczce dany_tekst.
4. Przyklej karteczkę na tablicy.
5. Odłoż długopis (?)</code></pre>
        </section>      
        <section>
          <h1 style="font-size: 3rem">Wszystko jasne do tej pory?</h1>
          <figure>
            <img src="img/llama.gif" />
          </figure>
        </section>
        <section>
          <h3>Anatomia funkcji</h3>
          <p>Funkcję w JavaScript deklarujemy przy użyciu słowa <code>function</code>:</p>
          <pre class="fragment"><code class="hljs javascript">function sum(x, y) {
  return x + y; 
}</code></pre>
          <p class="fragment">Wartości w nawiasie to są <strong>parametry</strong> - dane na ktorych funkcja operuje.</p>
          <p class="fragment">Słowem <code>return</code> oznaczamy wartość zwracaną przez funkcję, na ktorej możemy operować dalej:</p>
          <pre class="fragment"><code class="hljs javascript">let result = sum(2, 3) // result = 5</code></pre>
        </section>      
        <section>
          <h3>Otworzmy teraz plik exercise.html</h3>
          <figure>
            <a href="exercise.html" target="_blank"><img src="img/screenshot.png" /></a>
          </figure>
        </section>
        <section>
          <h3>Zadanie 1</h3>
          <p>W pliku mamy tablicę korkową z dodaną na niej karteczką.</p>    
          <p class="fragment">Naszym zadaniem będzie napisać funkcję, ktora doda do tablicy nową karteczkę, z dowolnym, podanym przez nas tekstem.</p>  
        </section>
        <section>
          <h3>Zadanie 1 - funkcje pomocnicze</h3>
          <p>W tym celu możemy wykorzystać dwie napisane już funkcje pomocnicze:</p>
          <ul>
          <li class="fragment"><code>getNote()</code> - ktora tworzy nową karteczkę i zwraca ją jako wynik działania,</li>
          <li class="fragment"><code>addNoteToBoard( note )</code> - bierze karteczkę przekazaną jako parametr i dodaje ją do tablicy.</li>
          </ul>
        </section>     
        <section>
          <h3>Coś jeszcze?</h3>
          <p>Zastanawiacie się pewnie, w jaki sposob napiszemy tekst na karteczce?</p>
          <p class="fragment">Nasza karteczka, jak każdy element <a href="help.html#/document" target="_blank">dokumentu</a> HTML ma właściwość <code>innerHTML</code>. Cokolwiek w niej zapiszemy, stanie się treścią karteczki, np:</p>  
          <pre class="fragment"><code class="hljs javascript">element.innerHTML = 'Kodowanie jest fajne!'</code></pre>                
        </section>     
        <section>    
          <h3>Do dzieła!</h3> 
          <p class="note task fade-left">
            Napiszmy funkcję <code>createNewNote</code>, ktora przyjmie jako parametr tekst, pobierze nową karteczkę korzystając z funkcji <code>getNote()</code>, napisze tekst na karteczce - zapisując go w <code>innerHTML</code>, a następnie karteczkę do tablicy przy użyciu funkcji <code>addNoteToBoard( note )</code>.
          </p>
        </section> 
        <section>
          <h3>Gotowe?</h3>
          <p>Powinno nam wyjść coś takiego:</p>
          <pre class="fragment"><code class="hljs javascript">function createNewNote( text ) {
    let newNote = getNote();
    newNote.innerHTML = text;
    addNoteToBoard( newNote );
}</code></pre>
        </section>   
        <section>
          <h1 style="font-size: 3rem">Wszystko się zgadza?</h1>
          <p>Przetestujmy teraz tę funkcję w konsoli.</p>
          <p class="fragment">Jak to zrobimy?</p>  
          <pre class="fragment"><code class="hljs javascript">createNewNote( "Zaprosić koleżankę na następne warsztaty" );</code></pre>
         </section>
        <section>         
          <h3>Bonus: sprobuj kliknąć na długopis i zobacz, co się wtedy stanie. </h3>
          <p class="fragment">Jeżeli twoja funkcja nazywa się <code>createNewNote</code> i działa jak trzeba, powinnaś mieć wygodną opcję dodawania nowych karteczek.</p> 
        </section>
        <section>         
          <h3>A co jeśli nie podamy żadnego tekstu?</h3>
          <p>Żeby karteczka nie była pusta, można zaproponować domyślny tekst, ktory pojawi się tam, kiedy nie przekażemy żadnego parametru.</p> 
          <p class="fragment">W tym celu możemy użyć <strong>parametrow domyślnych</strong>.</p> 
        </section> 
        <section>         
          <h3>Jak działają parametry domyślne?</h3>
          <p>Przy deklarowaniu funkcji i jej parametrow możemy podać domyślną wartość po znaku <code>=</code>. Na przykład:</p> 
           <pre class="fragment"><code class="hljs javascript">function setColor( color = 'yellow' ) {
    // jeżeli podasz kolor w nawiasie, funkcja użyje tego, ktory podałaś
    // jeżeli nie podasz żadnego, automatycznie ustawi się żołty
}</code></pre>         
        </section>  
        <section>    
          <h3>Wykorzystajmy to w praktyce.</h3> 
          <p class="note task fade-left">
            W funkcji <code>createNewNote</code>, ktorą wcześniej napisałaś, dodaj domyślną treść, ktora ma się pojawić, kiedy nie podamy żadnego tekstu.
          </p>
        </section>       
        <section>
          <h3>Proste, prawda?</h3>
          <pre class="fragment"><code class="hljs javascript">function createNewNote( text = "Dokupić więcej żoltych karteczek" ) {
    let newNote = getNote();
    newNote.innerHTML = text;
    addNoteToBoard( newNote );
}</code></pre>
        </section>        
        <section>
          <h3>No to lecimy dalej :-)</h3>          
          <figure class="fragment">
            <img src="img/lets-do-this.gif" />
          </figure>
        </section>      
        <section>
          <h3>Funkcja anonimowa</h3>
          <p>To funkcja ktora nie ma swojej nazwy. Wygląda na przykład tak:</p>
          <pre class="fragment"><code class="hljs javascript">function (x, y) {
  return x + y;
}</code></pre>
        </section>
        <section>
          <h3>Funkcja anonimowa</h3>
          <p>Po co więc nam funkcje anonimowe?</p>
          <p class="fragment">Możemy je przypisać do zmiennej:</p>
          <pre class="fragment"><code class="hljs javascript">let sum = function (x, y) {
  return x + y;
}
</code></pre>
          <p class="fragment">Ale to wiele nie różni się od funkcji nazwanej:</p>
          <pre class="fragment"><code class="hljs javascript">sum( 2, 3 ) // zwroci 5
</code></pre>          
        </section>
        <section>
          <h3>Funkcja anonimowa</h3>
          <p>Prawdziwy użytek można zrobić z funkcji anonimowych przy
             przekazywaniu jej jako parametr do innej funkcji, albo przy tworzeniu ich dynamicznie.</p>
        </section>
        <section>
          <h3>Czyli że o co chodzi?</h3>
          <p>Otworzmy teraz plik z drugim zadaniem, exercise2.html</p>
          <figure>
            <a href="exercise2.html" target="_blank"><img src="img/screenshot2.png" /></a>
          </figure>
        </section>  
        <section>
          <h3>Zadanie 2</h3>
          <p>Większość kodu kalkulatora jest już napisana. Mamy na przykład już gotową funkcję <code>numberKeyPressed( number )</code>, ktora wykonuje wszystkie operacje potrzebne przy naciśnięciu guziczka od 0 do 9.</p>
          <p class="fragment">To, czego potrzebujemy teraz to powiązać tę funkcję z akcją, kiedy ktoś naciśnie na jeden z tych przyciskow.</p>
        </section>      
        <section>
          <h3>Pamiętacie nasze warsztaty?</h3>
          <p>Poznałyśmy tam metodę <code>addEventListener</code>, ktora pozwala powiązać funkcję z wydarzeniem na elemencie. </p>
          <ul class="note more">
            <li><code>element.addEventListener( wydarzenie, akcja-do-wykonania )</code> - wykonuje
              podaną akcję, gdy z elementem stanie się coś konkretnego.
            </li>
          </ul>         
        </section>
        <section>
          <h3>addEventListener - przykład</h3>
          <pre class="fragment"><code class="hljs javascript">document.querySelector( '#button' ).addEventListener( 'click',
function () {
    console.log('Wciśnięty przycisk!');
});</code></pre>
          <p class="fragment">CDN<p>
        </section>
<!--

        <section>
          <h3>Callback</h3>
          <p>Na warsztacie mieliśmy coś podobnego.<p>
          <p class="fragment">Podpięcie się na zdarzenie kliknięcia<p>
          <pre class="fragment"><code class="hljs javascript">addEventListener('click', function () { ... })</code></pre>
          <p class="fragment">Automatyczne wykonanie kodu po określonym czasie<p>
          <pre class="fragment"><code class="hljs javascript">setTimeout(function () { ... }, 3000)</code></pre>
        </section>


        <section>
          <h3>Callback</h3>
          <p>
            Żeby callbacki miały sens, musimy zrozumieć co to jest kod <b>synchroniczny</b>
            oraz <b>asynchroniczny</b>.
          </p>
          <p class="fragment">Tak, brzmi to nieco skomplikowane, ale tak naprawdę nie jest :-)</p>
        </section>

        <section>
          <h3>Kod synchroniczny</h3>
          <p class="fragment">To taki, jaki pisałyście do tej pory<p>
          <pre class="fragment"><code class="hljs javascript">console.log('A')
console.log('B')
console.log('C')
console.log('D')</code></pre>
          <p class="fragment">W jakiej kolejności wypiszą się litery?<p>
          <p class="fragment">A, B, C, D<p>
        </section>

        <section>
          <h3>Kod synchroniczny</h3>
          <pre><code class="hljs javascript">console.log('A')
console.log('B')
console.log('C')
console.log('D')</code></pre>
          <p>Kolejność wykonania instrukcji jest taka sama jak zapisana w kodzie.<p>
          <p class="fragment">Dlatego nazywamy go <b>synchronicznym</b>.<p>
        </section>

        <section>
          <h3>Kod asynchroniczny</h3>
          <p>Przanalizujcie poniższy kawałek kodu<p>
          <pre class="fragment"><code class="hljs javascript">console.log('A')
setTimeout(function() {
  console.log('B')
  console.log('C')
}, 1000)
console.log('D')</code></pre>
          <p class="fragment">W jakiej kolejności pojawią się litery? Dlaczego?<p>
          <p class="fragment">A, D ... B, C</p>
        </section>

        <section>
          <h3>Kod asynchroniczny</h3>
          <p>
            Taki kod nazywamy <b>asynchronicznym</b>, ponieważ wykona się w innej kolejności,
            niż ta w której został zapisany.
          <p>
          <p class="fragment">
            Poza <code>setTimeout</code> i <code>addEventListener</code>, jest znacznie
            więcej asynchronicznych funkcji w JavaScripcie.
          <p>
          <p class="fragment">
            Wszelkie interakcje użytkownika ze stroną, wysyłanie i pobieranie danych itp,
            to wszystko są operacje asynchroniczne.
          </p>
        </section>

        <section>
          <h3>Czemu asynchroniczność</h3>
          <p>Żeby jeden kawałek kodu nie był zablokowany przez inny.</p>
          <p class="fragment">Gdyby nie było asynchroniczności, jak działał by poniższy kod?<p>
          <pre class="fragment"><code class="hljs javascript">element1.addEventListener('click', function () {
  console.log('Element 1 kliknięty')
})
element2.addEventListener('click', function () {
  console.log('Element 2 kliknięty')
})</code></pre>
          <p class="fragment">
            Najpierw użytkownik musiałby kliknąć w <code>element1</code>, a potem w <code>element2</code>.
            Wszelkie inne scenariusze byłyby nieoprogramowane.
          <p>
        </section>

        <section>
          <h3>TU jakieś ćwiczenie</h3>
        </section>

        <section>
          <h3>Metody obiektów</h3>
          <p>
            Jeśli byłyście na poprzednim follow-upie, to zapewne pamiętacie obiekty.
          </p>
          <p class="fragment">
            W skrócie obiekt to zbiór nazwanych zmiennych:
          </p>

          <pre class="fragment"><code class="hljs javascript">let obj = {
  name: 'Kasia',
  age: 32,
  job: 'Frontend Developer'
};

console.log( obj.name ); // Wypisze 'Kasia'</code></pre>
        </section>

        <section>
          <h3>Metody obiektów</h3>
          <p>
            Metody, to funkcje wewnątrz obiektów.
          </p>
          <p>
            Możemy je utworzyć za pomocą funkcji anonimowej.
          </p>
          <pre class="fragment"><code class="hljs javascript">let obj = {
  name: 'Kasia',
  age: 32,
  job: 'Frontend Developer',
  sayHi: function () {
    console.log('Hi!')
  }
};

obj.sayHi(); // Wypisze 'Hi!'</code></pre>
        </section>

        <section>
          <p>Gotowe na coś ambitnego? :-)</p>
        </section>

        <section>
          <h2>Funkcja zwracająca funkcję</h2>
        </section>

        <section>
          <h3>Funkcja zwracająca funkcję</h3>
          <p>Tak jak wiemy, funkcja może zwrócić dowolną wartość (dowolny typ).</p>
          <p class="fragment">
            Funkcja również jest typem i może być przypisana
            do zmiennej, przekazana jako argument itp...
          </p>
          <p class="fragment">
            Łącząc powyższe stwierdzenia, dochodzimy do wniosku, że funkcja może zwrócić funkcję.
          </p>
        </section>

        <section>
          <h3>Funkcja zwracająca funkcję</h3>
          <p>Zilustrujmy to zwracając funkcję anonimową (ale można też użyć funkcji nazwanej).</p>
          <pre class="fragment"><code class="hljs javascript">function myFunction() {
  return function () {
    console.log('Hurra!')
  }
}
</code></pre>
          <p class="fragment">Ok, jak teraz sprawić, aby pojawił się napis Hurra! w konsoli?</p>
        </section>

        <section>
          <p>Czy zadziała coś takiego?</p>
          <pre><code class="hljs javascript">myFunction()</code></pre>
          <p class="fragment">Nie. Dlaczego?</p>

          <p class="fragment">Co musimy zatem zrobić?</p>
          <pre class="fragment"><code class="hljs javascript">myFunction()()</code></pre>
        </section>

        <section>
          <h3>Czas na małe zadanie ;-)</h3>
          <p>Pamiętacie naszą funkcję <code>sum</code>?</p>
          <pre class="fragment"><code class="hljs javascript">function sum() {
  return x + y;
}

sum(2, 3) // zwróci 5</code></pre>
          <p class="fragment">
            Spróbujcie napisać nową funkcję <code>sum</code>, która będzie działać w
            następujący sposób:
          </p>
          <pre class="fragment"><code class="hljs javascript">sum(2)(3) // zwróci 5 </code></pre>
        </section>

        <section>
          <h3>Rozwiązanie</h3>
          <pre class="fragment"><code class="hljs javascript">function sum(x) {
  return function(y) {
    return x + y
  }
}

sum(2)(3) // zwróci 5</code></pre>
        </section>

        <section>
          <h3>Zastosowania</h3>
          <p>Funkcja zwracająca funkcję jest bardzo często spotykanym wzorcem.</p>
          <p class="fragment">
            Pozwala na przykład dodać parametr do callbacka, którego callback zazwyczaj nie przyjmuje.
          </p>
          <p class="fragment">
            Zobaczmy jak to ma miejsce w przypadku dodaniu callbacka obsługującego kliknięcie.
          </p>
        </section>

        <section>
          <p>Zwyczajowo, użycie <code>addEventListener</code> wygląda tak:</p>
          <pre class="fragment"><code class="hljs javascript">function welcome() {
  console.log('Hej');
}

button.addEventListener(welcome);</code></pre>
          <p class="fragment">Co zrobić, żeby móc dodać parametr (np. imię) do wywołania funkcji?</p>
          <p class="fragment">
            Funkcja <code>welcome</code> jest wywoływana automatycznie wewnątrz
            <code>addEventListener</code>, więc do wywołania nie mamy dostępu.
          </p>
        </section>

        <section>
          <p>Używając funkcji zwracającej funkcję, łatwo możemy rozwiązać ten problem:</p>
          <pre class="fragment"><code class="hljs javascript">function welcome(name) {
  return function () {
    console.log('Hej, ' + name);
  }
}

button.addEventListener(welcome('Zosia'));</code></pre>
        </section>
-->


        <section data-transition="zoom" data-transition-speed="slow">
            <p>Dzięki za wspólnie spędzony czas i&nbsp;do zobaczenia!</p>
            <img src="img/logo.svg" style="border: none; box-shadow: none;"/>
        </section>
    </div>
    <div class="small-duck"></div>
    <div class="footer">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/pl/">
        <img
            alt="Licencja Creative Commons" style="border-width:0;vertical-align:bottom"
            src="./img/cc.png" />
      </a>
      <span>
        Ta prezentacja jest dostępna na
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/pl/">
          licencji Creative Commons Uznanie autorstwa-Użycie niekomercyjne-Na tych
          samych warunkach 3.0 Polska
        </a>.
      </span>
    </div>
</div>


<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
      history: true,
      controls: false,
      progress: false,
      center: true,
      transition: 'convex',
      slideNumber: 'true',
      // More info https://github.com/hakimel/reveal.js#dependencies
      dependencies: [
          {
              src: 'plugin/highlight/highlight.js', async: true, callback: function () {
              hljs.initHighlightingOnLoad();
          }
          }
      ]
  });

  function changeTopBar(slideNumber) {
    if (slideNumber === 0) {
      document.querySelector('.left-bar').classList.add('big')
    } else {
      document.querySelector('.left-bar').classList.remove('big')
    }
  }

  Reveal.addEventListener('slidechanged', function( event ) {
    changeTopBar(event.indexh)
  });

  setTimeout(changeTopBar(Reveal.getIndices()['h']), 100)
</script>
</body>
</html>
